{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\romfa\\\\Desktop\\\\\\u200F\\u200F\\u200F\\u200F\\u200F\\u200FMakeGood - heb - 1\\\\src\\\\screens\\\\user\\\\EditVolunteerScreen.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useCallback, useReducer } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { HeaderButtons, Item } from 'react-navigation-header-buttons';\nimport { useSelector, useDispatch } from 'react-redux';\nimport HeaderButton from \"../../components/UI/HeaderButton\";\nimport * as volunteersActions from \"../../store/actions/volunteers\";\nimport Input from \"../../components/UI/Input\";\nimport Colors from \"../../constants/Colors\";\nvar FORM_INPUT_UPDATE = 'FORM_INPUT_UPDATE';\n\nvar formReducer = function formReducer(state, action) {\n  if (action.type === FORM_INPUT_UPDATE) {\n    var updatedValues = _objectSpread(_objectSpread({}, state.inputValues), {}, _defineProperty({}, action.input, action.value));\n\n    var updatedValidities = _objectSpread(_objectSpread({}, state.inputValidities), {}, _defineProperty({}, action.input, action.isValid));\n\n    var updatedFormIsValid = true;\n\n    for (var key in updatedValidities) {\n      updatedFormIsValid = updatedFormIsValid && updatedValidities[key];\n    }\n\n    return {\n      formIsValid: updatedFormIsValid,\n      inputValidities: updatedValidities,\n      inputValues: updatedValues\n    };\n  }\n\n  return state;\n};\n\nvar EditVolunteerScreen = function EditVolunteerScreen(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var volId = props.navigation.getParam('volunteerId');\n  var editedVolunteer = useSelector(function (state) {\n    return state.volunteers.userVolunteers.find(function (vol) {\n      return vol.id === prodId;\n    });\n  });\n  var dispatch = useDispatch();\n\n  var _useReducer = useReducer(formReducer, {\n    inputValues: {\n      title: editedVolunteer ? editedVolunteer.title : '',\n      imageUrl: editedVolunteer ? editedVolunteer.imageUrl : '',\n      location: editedVolunteer ? editedVolunteer.location : '',\n      time: editedVolunteer ? editedVolunteer.time : '',\n      description: editedVolunteer ? editedVolunteer.description : ''\n    },\n    formIsValid: editedVolunteer ? true : false\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      formState = _useReducer2[0],\n      dispatchFormState = _useReducer2[1];\n\n  useEffect(function () {\n    if (error) {\n      Alert.alert('התרחשה שגיאה.. אנא נסה שנית..', error, [{\n        text: 'המשך'\n      }]);\n    }\n  }, [error]);\n  var submitHandler = useCallback(function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (formState.formIsValid) {\n              _context.next = 3;\n              break;\n            }\n\n            Alert.alert('טעות בהזנת הנתונים!', 'אנא בדוק שגיאות הזנה בטופס.', [{\n              text: 'המשך'\n            }]);\n            return _context.abrupt(\"return\");\n\n          case 3:\n            setError(null);\n            setIsLoading(true);\n            _context.prev = 5;\n\n            if (!editedVolunteer) {\n              _context.next = 11;\n              break;\n            }\n\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(dispatch(volunteersActions.updateVolunteer(prodId, formState.inputValues.title, formState.inputValues.description, formState.inputValues.imageUrl, formState.inputValues.location, formState.inputValues.time)));\n\n          case 9:\n            _context.next = 13;\n            break;\n\n          case 11:\n            _context.next = 13;\n            return _regeneratorRuntime.awrap(dispatch(volunteersActions.createVolunteer(formState.inputValues.title, formState.inputValues.description, formState.inputValues.imageUrl, formState.inputValues.location, formState.inputValues.time)));\n\n          case 13:\n            props.navigation.goBack();\n            _context.next = 19;\n            break;\n\n          case 16:\n            _context.prev = 16;\n            _context.t0 = _context[\"catch\"](5);\n            setError(_context.t0.message);\n\n          case 19:\n            setIsLoading(false);\n\n          case 20:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[5, 16]], Promise);\n  }, [dispatch, prodId, formState]);\n  useEffect(function () {\n    props.navigation.setParams({\n      submit: submitHandler\n    });\n  }, [submitHandler]);\n  var inputChangeHandler = useCallback(function (inputIdentifier, inputValue, inputValidity) {\n    dispatchFormState({\n      type: FORM_INPUT_UPDATE,\n      value: inputValue,\n      isValid: inputValidity,\n      input: inputIdentifier\n    });\n  }, [dispatchFormState]);\n\n  if (isLoading) {\n    return React.createElement(View, {\n      style: styles.centered,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }\n    }, React.createElement(ActivityIndicator, {\n      size: \"large\",\n      color: Colors.primary,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  return React.createElement(ScrollView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.form,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, React.createElement(Input, {\n    id: \"title\",\n    label: \"\\u05E0\\u05D5\\u05E9\\u05D0 \\u05D4\\u05D1\\u05E7\\u05E9\\u05D4\",\n    errorText: \"\\u05D0\\u05E0\\u05D0 \\u05D4\\u05DB\\u05E0\\u05E1 \\u05DB\\u05D5\\u05EA\\u05E8\\u05EA \\u05D4\\u05D1\\u05E7\\u05E9\\u05D4!\",\n    onInputChange: inputChangeHandler,\n    initialValue: editedVolunteer ? editedVolunteer.title : '',\n    initiallyValid: !!editedVolunteer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 11\n    }\n  }), React.createElement(Input, {\n    id: \"imageUrl\",\n    label: \"\\u05E7\\u05D9\\u05E9\\u05D5\\u05E8 \\u05DC\\u05EA\\u05DE\\u05D5\\u05E0\\u05D4\",\n    errorText: \"\\u05D0\\u05E0\\u05D0 \\u05D4\\u05DB\\u05E0\\u05E1 \\u05E7\\u05D9\\u05E9\\u05D5\\u05E8 \\u05EA\\u05E7\\u05D9\\u05DF!\",\n    onInputChange: inputChangeHandler,\n    initialValue: editedVolunteer ? editedVolunteer.imageUrl : '',\n    initiallyValid: !!editedVolunteer,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }), React.createElement(Input, {\n    id: \"location\",\n    label: \"\\u05D0\\u05D6\\u05D5\\u05E8\",\n    errorText: \"\\u05D0\\u05E0\\u05D0 \\u05D4\\u05DB\\u05E0\\u05E1 \\u05D0\\u05D6\\u05D5\\u05E8 \\u05EA\\u05E7\\u05D9\\u05DF!\",\n    onInputChange: inputChangeHandler,\n    initialValue: editedVolunteer ? editedVolunteer.location : '',\n    initiallyValid: !!editedVolunteer,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }), React.createElement(Input, {\n    id: \"time\",\n    label: \"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA \\u05D5\\u05E9\\u05E2\\u05D4\",\n    errorText: \"\\u05D0\\u05E0\\u05D0 \\u05D4\\u05DB\\u05E0\\u05E1 \\u05EA\\u05D0\\u05E8\\u05D9\\u05DA \\u05D5\\u05E9\\u05E2\\u05D4 \\u05EA\\u05E7\\u05D9\\u05E0\\u05D4!\",\n    onInputChange: inputChangeHandler,\n    initialValue: editedVolunteer ? editedVolunteer.time : '',\n    initiallyValid: !!editedVolunteer,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }), React.createElement(Input, {\n    id: \"description\",\n    label: \"\\u05E4\\u05E8\\u05D8\\u05D9\\u05DD \\u05E0\\u05D5\\u05E1\\u05E4\\u05D9\\u05DD (\\u05D0\\u05D5\\u05E4\\u05E6\\u05D9\\u05D5\\u05DC\\u05E0\\u05D9)\",\n    errorText: \"\\u05D0\\u05E0\\u05D0 \\u05D4\\u05DB\\u05E0\\u05E1 \\u05EA\\u05D0\\u05D5\\u05E8 \\u05EA\\u05E7\\u05D9\\u05DF!\",\n    onInputChange: inputChangeHandler,\n    initialValue: editedVolunteer ? editedVolunteer.description : '',\n    initiallyValid: !!editedVolunteer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }\n  })));\n};\n\nEditVolunteerScreen.navigationOptions = function (navData) {\n  var submitFn = navData.navigation.getParam('submit');\n  return {\n    headerTitle: navData.navigation.getParam('volunteerId') ? 'MakeGood - ערוך בקשה' : 'MakeGood - הוסף בקשה',\n    headerRight: function headerRight() {\n      return React.createElement(HeaderButtons, {\n        HeaderButtonComponent: HeaderButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 7\n        }\n      }, React.createElement(Item, {\n        title: \"Save\",\n        iconName: 'md-checkmark',\n        onPress: submitFn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 9\n        }\n      }));\n    }\n  };\n};\n\nvar styles = StyleSheet.create({\n  form: {\n    margin: 20\n  },\n  centered: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});\nexport default EditVolunteerScreen;","map":{"version":3,"sources":["C:/Users/romfa/Desktop/‏‏‏‏‏‏MakeGood - heb - 1/src/screens/user/EditVolunteerScreen.js"],"names":["React","useState","useEffect","useCallback","useReducer","HeaderButtons","Item","useSelector","useDispatch","HeaderButton","volunteersActions","Input","Colors","FORM_INPUT_UPDATE","formReducer","state","action","type","updatedValues","inputValues","input","value","updatedValidities","inputValidities","isValid","updatedFormIsValid","key","formIsValid","EditVolunteerScreen","props","isLoading","setIsLoading","error","setError","volId","navigation","getParam","editedVolunteer","volunteers","userVolunteers","find","vol","id","prodId","dispatch","title","imageUrl","location","time","description","formState","dispatchFormState","Alert","alert","text","submitHandler","updateVolunteer","createVolunteer","goBack","message","setParams","submit","inputChangeHandler","inputIdentifier","inputValue","inputValidity","styles","centered","primary","form","navigationOptions","navData","submitFn","headerTitle","headerRight","StyleSheet","create","margin","flex","justifyContent","alignItems"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback, useReducer } from 'react';\nimport {\n  View,\n  ScrollView,\n  StyleSheet,\n  Alert,\n  ActivityIndicator\n} from 'react-native';\nimport { HeaderButtons, Item } from 'react-navigation-header-buttons';\nimport { useSelector, useDispatch } from 'react-redux';\nimport HeaderButton from '../../components/UI/HeaderButton';\nimport * as volunteersActions from '../../store/actions/volunteers';\nimport Input from '../../components/UI/Input';\nimport Colors from '../../constants/Colors';\n\nconst FORM_INPUT_UPDATE = 'FORM_INPUT_UPDATE';\n\nconst formReducer = (state, action) => {\n  if (action.type === FORM_INPUT_UPDATE) {\n    const updatedValues = {\n      ...state.inputValues,\n      [action.input]: action.value\n    };\n    const updatedValidities = {\n      ...state.inputValidities,\n      [action.input]: action.isValid\n    };\n    let updatedFormIsValid = true;\n    for (const key in updatedValidities) {\n      updatedFormIsValid = updatedFormIsValid && updatedValidities[key];\n    }\n    return {\n      formIsValid: updatedFormIsValid,\n      inputValidities: updatedValidities,\n      inputValues: updatedValues\n    };\n  }\n  return state;\n};\n\nconst EditVolunteerScreen = props => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState();\n\n  const volId = props.navigation.getParam('volunteerId');\n  const editedVolunteer = useSelector(state =>\n    state.volunteers.userVolunteers.find(vol => vol.id === prodId)\n  );\n  const dispatch = useDispatch();\n\n  const [formState, dispatchFormState] = useReducer(formReducer, {\n    inputValues: {\n      title: editedVolunteer ? editedVolunteer.title : '',\n      imageUrl: editedVolunteer ? editedVolunteer.imageUrl : '',\n      location: editedVolunteer ? editedVolunteer.location : '',\n      time: editedVolunteer ? editedVolunteer.time : '',\n      description: editedVolunteer ? editedVolunteer.description : ''\n    },\n    formIsValid: editedVolunteer ? true : false\n  });\n\n  useEffect(() => {\n    if (error) {\n      Alert.alert('התרחשה שגיאה.. אנא נסה שנית..', error, [{ text: 'המשך' }]);\n    }\n  }, [error]);\n\n  const submitHandler = useCallback(async () => {\n    if (!formState.formIsValid) {\n      Alert.alert('טעות בהזנת הנתונים!', 'אנא בדוק שגיאות הזנה בטופס.', [\n        { text: 'המשך' }\n      ]);\n      return;\n    }\n    setError(null);\n    setIsLoading(true);\n    try {\n      if (editedVolunteer) {\n        await dispatch(\n          volunteersActions.updateVolunteer(\n            prodId,\n            formState.inputValues.title,\n            formState.inputValues.description,\n            formState.inputValues.imageUrl,\n            formState.inputValues.location,\n            formState.inputValues.time\n          )\n        );\n      } else {\n        await dispatch(\n          volunteersActions.createVolunteer(\n            formState.inputValues.title,\n            formState.inputValues.description,\n            formState.inputValues.imageUrl,\n            formState.inputValues.location,\n            formState.inputValues.time\n          )\n        );\n      }\n      props.navigation.goBack();\n    } catch (err) {\n      setError(err.message);\n    }\n\n    setIsLoading(false);\n    \n  }, [dispatch, prodId, formState]);\n\n  useEffect(() => {\n    props.navigation.setParams({ submit: submitHandler });\n  }, [submitHandler]);\n\n  const inputChangeHandler = useCallback(\n    (inputIdentifier, inputValue, inputValidity) => {\n      dispatchFormState({\n        type: FORM_INPUT_UPDATE,\n        value: inputValue,\n        isValid: inputValidity,\n        input: inputIdentifier\n      });\n    },\n    [dispatchFormState]\n  );\n\n  if (isLoading) {\n    return (\n      <View style={styles.centered}>\n        <ActivityIndicator size=\"large\" color={Colors.primary} />\n      </View>\n    );\n  }\n\n  return (\n\n      <ScrollView>\n        <View style={styles.form}>\n          <Input\n            id=\"title\"\n            label=\"נושא הבקשה\"\n            errorText=\"אנא הכנס כותרת הבקשה!\"\n            onInputChange={inputChangeHandler}\n            initialValue={editedVolunteer ? editedVolunteer.title : ''}\n            initiallyValid={!!editedVolunteer}\n        \n          />\n          <Input\n            id=\"imageUrl\"\n            label=\"קישור לתמונה\"\n            errorText=\"אנא הכנס קישור תקין!\"\n            onInputChange={inputChangeHandler}\n            initialValue={editedVolunteer ? editedVolunteer.imageUrl : ''}\n            initiallyValid={!!editedVolunteer}\n            required\n          />\n            <Input\n              id=\"location\"\n              label=\"אזור\"\n              errorText=\"אנא הכנס אזור תקין!\"\n              onInputChange={inputChangeHandler}\n              initialValue={editedVolunteer ? editedVolunteer.location : ''}\n              initiallyValid={!!editedVolunteer}\n              required\n        />\n        <Input\n              id=\"time\"\n              label=\"תאריך ושעה\"\n              errorText=\"אנא הכנס תאריך ושעה תקינה!\"\n              onInputChange={inputChangeHandler}\n              initialValue={editedVolunteer ? editedVolunteer.time : ''}\n          initiallyValid={!!editedVolunteer}\n          required\n            />\n          <Input\n            id=\"description\"\n            label=\"פרטים נוספים (אופציולני)\"\n            errorText=\"אנא הכנס תאור תקין!\"\n            onInputChange={inputChangeHandler}\n            initialValue={editedVolunteer ? editedVolunteer.description : ''}\n          initiallyValid={!!editedVolunteer}\n        />\n      </View>\n      \n      </ScrollView>\n  );\n};\n\nEditVolunteerScreen.navigationOptions = navData => {\n  const submitFn = navData.navigation.getParam('submit');\n  return {\n    headerTitle: navData.navigation.getParam('volunteerId')\n      ? 'MakeGood - ערוך בקשה'\n      : 'MakeGood - הוסף בקשה',\n    headerRight: () => \n      <HeaderButtons HeaderButtonComponent={HeaderButton}>\n        <Item\n          title=\"Save\"\n          iconName={\n             'md-checkmark'\n          }\n          onPress={submitFn}\n        />\n      </HeaderButtons>\n  };\n};\n\nconst styles = StyleSheet.create({\n  form: {\n    margin: 20\n  },\n  centered: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});\n\nexport default EditVolunteerScreen;\n"]},"metadata":{},"sourceType":"module"}